<!--pages/student/home/home.wxml-->
<view class="page">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒº -->
  <view class="header">
    <view class="user-info">
      <image class="avatar animate-fade-in" src="{{userInfo.avatar || '/assets/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-text">
        <text class="username">{{userInfo.name || 'åŒå­¦'}}</text>
        <text class="user-desc">ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å“¦ ğŸ’ª</text>
      </view>
    </view>
    <view class="points-badge animate-bounce">
      <text class="points-num">{{userInfo.points || 0}}</text>
      <text class="points-label">ç§¯åˆ†</text>
    </view>
  </view>

  <!-- ä»Šæ—¥è¯„ä»·å¡ç‰‡ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥è¯„ä»·</text>
      <text class="section-more" bindtap="goToHistory">æŸ¥çœ‹å†å² â€º</text>
    </view>
    
    <view class="today-card animate-slide-up" wx:if="{{todayEvaluation}}">
      <view class="today-header">
        <text class="today-course">{{todayEvaluation.course}}</text>
        <view class="score-badge {{todayEvaluation.score >= 90 ? 'excellent' : todayEvaluation.score >= 80 ? 'good' : 'normal'}}">
          <text class="score-text">{{todayEvaluation.score}}</text>
        </view>
      </view>
      <text class="today-comment">{{todayEvaluation.comment}}</text>
      <view class="today-footer">
        <text class="today-teacher">{{todayEvaluation.teacher}} è€å¸ˆ</text>
        <text class="today-time">{{todayEvaluation.time}}</text>
      </view>
    </view>

    <view class="empty-card animate-fade-in" wx:else>
      <image class="empty-icon" src="/assets/empty-evaluation.png" mode="aspectFit"></image>
      <text class="empty-text">ä»Šå¤©è¿˜æ²¡æœ‰è¯„ä»·å“¦</text>
    </view>
  </view>

  <!-- æˆé•¿æ•°æ® -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æˆé•¿æ•°æ®</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-item animate-scale" wx:for="{{stats}}" wx:key="index" style="animation-delay: {{index * 0.1}}s">
        <view class="stat-icon-wrapper {{item.color}}">
          <text class="stat-icon">{{item.icon}}</text>
        </view>
        <text class="stat-value">{{item.value}}</text>
        <text class="stat-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘ç…§ç‰‡ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘ç…§ç‰‡</text>
      <text class="section-more" bindtap="goToPhotos">æŸ¥çœ‹å…¨éƒ¨ â€º</text>
    </view>
    
    <scroll-view class="photos-scroll" scroll-x wx:if="{{recentPhotos && recentPhotos.length > 0}}">
      <view class="photo-item animate-fade-in" wx:for="{{recentPhotos}}" wx:key="index" bindtap="previewPhoto" data-url="{{item.url}}">
        <image class="photo-img" src="{{item.url}}" mode="aspectFill"></image>
        <view class="photo-mask">
          <text class="photo-date">{{item.date}}</text>
        </view>
      </view>
    </scroll-view>
    <view class="empty-state animate-fade-in" wx:else>
      <text class="empty-icon">ğŸ“·</text>
      <text class="empty-text">æš‚æ— ç…§ç‰‡</text>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å¿«æ·åŠŸèƒ½</text>
    </view>
    
    <view class="quick-actions">
      <view class="action-btn animate-bounce" wx:for="{{quickActions}}" wx:key="index" style="animation-delay: {{index * 0.1}}s" bindtap="handleAction" data-action="{{item.action}}">
        <view class="action-icon-bg {{item.color}}">
          <text class="action-icon">{{item.icon}}</text>
        </view>
        <text class="action-label">{{item.label}}</text>
      </view>
    </view>
  </view>
</view>